{% extends "shared/_viewport.html" %}
{% load i18n %}
{% load staticfiles %}
{% block meta %}

    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="csrf-token" content="{{ csrf_token }}">
    <meta name="dkobo-root-url" content="{{ root_url }}">
    <script type="text/javascript">
        {% if USE_I18N %}
            {% get_current_language as LANGUAGE_CODE %}
            window._rootUrl = '/' + '{{ LANGUAGE_CODE }}' + '/' +
                document.head.querySelector('meta[name=dkobo-root-url]').content.replace(/\/$/, '');
        {% else %}
            window._rootUrl = '/' + document.head.querySelector('meta[name=dkobo-root-url]').content.replace(/\/$/, '');
        {% endif %}
        {% if AWS_S3_CUSTOM_DOMAIN %}
            window._staticUrl = '{{ AWS_S3_CUSTOM_DOMAIN }}';
        {% endif %}
        console.log(window._approve_permission);
        window._approve_permission = '{{ APPROVE_PERMISSION }}';
        window._secondary_language = '{{ SECONDARY_LANGUAGE }}';
    </script>

{% endblock %}
{% block pre_styles %}

    <link rel="stylesheet" href="{% static 'css/jquery-ui-1.10.4.custom.css' %}">
    <link rel="stylesheet" href="{% static 'jsapp/components/fontawesome/css/font-awesome.css' %}" media="all">
    <link rel="stylesheet" href="{% static 'jsapp/components/angular-ui-select/dist/select.css' %}" media="all">
    <link rel="stylesheet" href="{% static 'jsapp/components/jquery.tagsinput/jquery.tagsinput.css' %}" media="all">
    <link rel="stylesheet" href="{% static 'jsapp/kobo/compiled/kobo.css' %}" media="all">

{% endblock %}


{% block styles %}
    <link rel="stylesheet" href="{% static 'css/sweet_alert/sweetalert2.min.css' %}">

    <link rel="stylesheet" href="{% static 'css/custom/custom_survey_design.css' %}">
{% endblock %}
{% block scripts %}
    <script src="{{ STATIC_URL }}assets/js/jquery.min.js?v=1.1.0"></script>
    <script src="{{ STATIC_URL }}assets/js/jquery.browser.min.js?v=1.1.0"></script>
    <script src="{{ STATIC_URL }}fieldbuzz_themes/js/chosen.jquery.js?v=1.1.0"></script>
    <script src="{{ STATIC_URL }}fieldbuzz_themes/js/bootstrap-checkbox.js?v=1.1.0"></script>
    <script src="{{ STATIC_URL }}fieldbuzz_themes/js/custom.fbxscript.js?v=1.1.0"></script>
    <script src="{{ STATIC_URL }}assets/js/bootstrap.js?v=1.1.0"></script>
    <script src="{{ STATIC_URL }}fieldbuzz_themes/js/bootstrap.js?v=1.1.0"></script>
    {#    <script src="{{ STATIC_URL }}assets/select2-3.5.1/select2.js?v=1.1.0"></script>#}
    <script src="{{ STATIC_URL }}assets/js/jquery-ui.min.js?v=1.1.0"></script>
    <script src="{{ STATIC_URL }}assets/js/jquery-template/jquery.loadTemplate-1.4.4.min.js?v=1.1.0"></script>
    <script src="{{ STATIC_URL }}assets/js/moment.js?v=1.1.0"></script>
    <script src="{{ STATIC_URL }}assets/js/bootstrap-datetimepicker.min.js?v=1.1.0"></script>
    <script src="{{ STATIC_URL }}assets/js/validation/jquery.validate.min.js?v=1.1.0"></script>
    <script src="{{ STATIC_URL }}assets/js/validation/jquery.validate.unobtrusive.min.js?v=1.1.0"></script>
    <script src="{{ STATIC_URL }}assets/js/jquery.qrcode.js?v=1.1.0"></script>
    <script src="{{ STATIC_URL }}assets/js/qrcode.js?v=1.1.0"></script>
    <script src="{{ STATIC_URL }}assets/js/wizard/bwizard.js?v=1.1.0"></script>

    {#    <script src="{{ STATIC_URL }}js/form-validation.js?v=1.1.0"></script>#}
    <script src="{{ STATIC_URL }}js/user-create-form.js?v=1.1.0"></script>
    <script src="{{ STATIC_URL }}js/templated-alert.js?v=1.1.0"></script>
    <script src="{{ STATIC_URL }}js/jquery.dataTables.js?v=1.1.0"></script>
    <script src="{{ STATIC_URL }}js/jquery.magnific-popup.min.js?v=1.1.0"></script>

    <script src="{{ STATIC_URL }}js/constant/static.js?v=1.1.0"></script>
    <script src="{{ STATIC_URL }}fieldbuzz_themes/js/tinymce.min.js?v=1.1.0"></script>
    <script src="{{ STATIC_URL }}fieldbuzz_themes/js/notification_fx/classie.js?v=1.1.0"></script>
    <script src="{{ STATIC_URL }}fieldbuzz_themes/js/notification_fx/notificationFx.js?v=1.1.0"></script>
    {#    <script src="{{ STATIC_URL }}js/manage/image-popup.js?v=1.1.0"></script>#}

    <!-- Layout JS -->
    <script src="{{ STATIC_URL }}js/layout/layout_base.js?v=1.1.0"></script>
    <script src="{{ STATIC_URL }}js/layout/bw-select2-generic-action.js?v=1.1.2"></script>
    <script src="{{ STATIC_URL }}js/layout/bw-select2-legacy.js?v=1.1.1"></script>
    <script src="{{ STATIC_URL }}js/layout/bw-partial-tab.js?v=1.1.1"></script>
    <script src="{{ STATIC_URL }}js/layout/bw-modal-global.js?v=1.1.0"></script>
    <script src="{{ STATIC_URL }}js/layout/bw-modal-keyinfo.js?v=1.1.0"></script>
    <script src="{{ STATIC_URL }}js/layout/bw-modal-import.js?v=1.1.0"></script>
    <script src="{{ STATIC_URL }}js/layout/bw-modal-export.js?v=1.1.3"></script>
    <script src="{{ STATIC_URL }}js/layout/bw-modal-reset.js?v=1.1.0"></script>
    <script src="{{ STATIC_URL }}js/layout/bw-advanced-edit-form.js?v=1.1.0"></script>
    <script src="{{ STATIC_URL }}js/layout/bw-delete-item-action.js?v=1.1.0"></script>
    <script src="{{ STATIC_URL }}js/widget/image_widget.js?v=1.1.0"></script>
    <script src="{{ STATIC_URL }}js/layout/layout_extras.js?v=1.1.0"></script>
    <script src="{{ STATIC_URL }}js/tipped-tooltip.js?v=1.1.0"></script>
    <script src="{{ STATIC_URL }}js/manage/bw-tooltip.js?v=1.1.0"></script>

    <script src="{% static 'jsapp/kobo/libs/modernizr.js' %}"></script>

    <script src="{% static 'jsapp/components/jquery/dist/jquery.js' %}"></script>

    <script src="{% static 'jsapp/components/jquery-migrate/jquery-migrate.js' %}"></script>
    <script src="{% static 'jsapp/components/underscore/underscore.js' %}"></script>
    <script src="{% static 'jsapp/components/backbone/backbone.js' %}"></script>
    <script src="{% static 'js/jquery.poshytip.js' %}"></script>
    <script src="{% static 'jsapp/components/x-editable/dist/jquery-editable/js/jquery-editable-poshytip.js' %}"></script>


    <script src="{% static 'js/sweet_alert/sweetalert2.min.js' %}"></script>

    {% if livereload_address %}
        <script src="{{ livereload_address }}"></script>
    {% endif %}

    <script type="text/javascript" charset="utf-8">
        window.staticFilesUri = "{% static 'jsapp/kobo/' %}";
    </script>
    <script type="text/javascript">
        window.userDetails = {{user_details|safe}};
        window.koboConfigs = {{page_kobo_configs|safe}};
        $.fn.editable.defaults.mode = 'inline';
        $.fn.editable.defaults.onblur = 'submit';
        $.fn.editable.defaults.showbuttons = false;
    </script>

    <script src="{% static 'js/log.coffee' %}" type="text/coffeescript"></script>

    <script src="{% static 'jsapp/components/angular/angular.js' %}"></script>
    <script src="{% static 'jsapp/components/angular-sanitize/angular-sanitize.min.js' %}"></script>
    <script src="{% static 'jsapp/components/angular-cookies/angular-cookies.js' %}"></script>
    <script src="{% static 'jsapp/components/angular-mocks/angular-mocks.js' %}"></script>
    <script src="{% static 'jsapp/components/angular-resource/angular-resource.js' %}"></script>
    <script src="{% static 'jsapp/components/angular-route/angular-route.js' %}"></script>
    <script src="{% static 'jsapp/components/angular-ui-utils/ui-utils.js' %}"></script>
    <script src="{% static 'jsapp/components/select2/select2.js' %}"></script>

    <script src="{% static 'jsapp/components/jquery.scrollTo/jquery.scrollTo.js' %}"></script>
    <script src="{% static 'js/Backbone.Validation.js' %}"></script>
    <script src="{% static 'jsapp/components/angular-ui-select/dist/select.js' %}"></script>
    <script src="{% static 'jsapp/components/jquery.tagsinput/jquery.tagsinput.min.js' %}"></script>
    <script src="{% static 'js/modal.js' %}"></script>
    <script src="{% static 'js/jquery-ui-1.10.4.custom.js' %}"></script>
    <script src="{% static 'jsapp/components/jquery-ui-touch-punch-improved/jquery.ui.touch-punch-improved.js' %}"></script>

    <script src="{% static 'js/vendor/jquery.ui.widget.js' %}"></script>
    <script src="{% static 'js/jquery.iframe-transport.js' %}"></script>
    <script src="{% static 'js/jquery.fileupload.js' %}"></script>
    <script src="{% static 'js/jquery.fileupload-angular.js' %}"></script>


    <script src="{{ STATIC_URL }}jsapp/kobo/compiled/dkobo_xlform.js?v=1.0.1"></script>

    {% block app_script %}

        <script src="{% static 'jsapp/kobo/app.js' %}"></script>

    {% endblock %}
    <script src="{% static 'jsapp/kobo/directives/OutsideClick.Directive.js' %}"></script>
    <script src="{% static 'jsapp/kobo/directives/QuestionLibrary.Directive.js' %}"></script>
    <script src="{% static 'jsapp/kobo/directives/TopLevelMenu.Directive.js' %}"></script>
    <script src="{% static 'jsapp/kobo/directives/KobocatFormPublisher.Directive.js' %}"></script>
    <script src="{% static 'jsapp/kobo/directives/InfoList.Directive.js' %}"></script>
    <script src="{% static 'jsapp/kobo/directives/ItemList.Directive.js' %}"></script>
    <script src="{% static 'jsapp/kobo/directives/InnerTransclude.Directive.js' %}"></script>
    <script src="{% static 'jsapp/kobo/directives/QuestionDetails.Directive.js' %}"></script>
    <script src="{% static 'jsapp/kobo/directives/FocusOn.Directive.js' %}"></script>
    <script src="{% static 'jsapp/kobo/directives/ItemFilters.Directive.js' %}"></script>
    <script src="{% static 'jsapp/kobo/directives/AddNewTag.Directive.js' %}"></script>
    <script src="{% static 'jsapp/kobo/directives/Tags.Directive.js' %}"></script>
    <script src="{% static 'jsapp/kobo/directives/InfiniteScroll.Directive.js' %}"></script>
    <script src="{% static 'jsapp/kobo/factories/UserDetails.Factory.js' %}"></script>
    <script src="{% static 'jsapp/kobo/factories/restApi.Factory.js' %}"></script>
    <script src="{% static 'jsapp/kobo/filters/Titlecase.Filter.js' %}"></script>
    <script src="{% static 'jsapp/kobo/filters/Item.Filter.js' %}"></script>
    <script src="{% static 'jsapp/kobo/services/RouteTo.Service.js' %}"></script>
    <script src="{% static 'jsapp/kobo/services/MiscUtils.Service.js' %}"></script>
    <script src="{% static 'jsapp/kobo/services/Configuration.Service.js' %}"></script>
    <script src="{% static 'jsapp/kobo/services/Api.Service.js' %}"></script>
    <script src="{% static 'jsapp/kobo/controllers/Builder.Controller.js' %}"></script>
    <script src="{% static 'jsapp/kobo/controllers/Header.Controller.js' %}"></script>
    <script src="{% static 'jsapp/kobo/controllers/Forms.Controller.js' %}"></script>
    <script src="{% static 'jsapp/kobo/controllers/Assets.Controller.js' %}"></script>
    <script src="{% static 'jsapp/kobo/controllers/AssetEditor.Controller.js' %}"></script>
    <script src="{% static 'jsapp/kobo/controllers/Import.Controller.js' %}"></script>
    <script src="{% static 'jsapp/kobo/app_run.js' %}"></script>


{% endblock %}

{% block header %}
    <div class="row">

        <div class="col-sm-1 hidden-xs"></div>
        <div class="col-sm-5 col-md-4 titleclass">
            <div class="fbx-title  xs-text-center">
                <h3>{{ title }}</h3>
            </div>
        </div>
    </div>
{% endblock %}
<script>
    window.onscroll = function (e) {
        console.log(window.scrollY); // Value of scroll Y in px
    };

</script>
{% block content %}
    {% include 'dynamic_survey_form/dynamic_survey_form.html' %}

    <div ng-app="dkobo">
        {%verbatim %}

        <section top-level-menu class="top-level-menu" active-tab="activeTab" ng-class="topLevelMenuActive"></section>
        <main class="main" ng-click="closeTopMenu()">


            <section ng-view class="content" ng-class="additionalClasses"></section>
            <div class="alert-modal"></div>

        </main>

        {% endverbatim %}

        {% if trackjs_token %}
            <script type="text/javascript">

                window._trackJs = {};
                if (window.userDetails && window.userDetails.username) {
                    _trackJs.userId = window.userDetails.username;
                }

            </script>
            <script type="text/javascript" src="//d2zah9y47r7bi2.cloudfront.net/releases/current/tracker.js"
                    data-token="{{ trackjs_token }}"></script>
        {% endif %}
        {% if google_analytics_token %}
            <script>
                (function (i, s, o, g, r, a, m) {
                    i['GoogleAnalyticsObject'] = r;
                    i[r] = i[r] || function () {
                        (i[r].q = i[r].q || []).push(arguments)
                    }, i[r].l = 1 * new Date();
                    a = s.createElement(o),
                        m = s.getElementsByTagName(o)[0];
                    a.async = 1;
                    a.src = g;
                    m.parentNode.insertBefore(a, m)
                })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
                ga('create', '{{google_analytics_token}}', 'auto');
                ga('send', 'pageview');
            </script>
        {% endif %}

    </div>
{% endblock %}